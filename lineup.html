<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Match Lineup PRO</title>

<style>
body {
  margin:0;
  font-family:Arial, sans-serif;
  background:#111;
  color:white;
}

header {
  text-align:center;
  padding:15px;
  font-size:22px;
}

.controls {
  padding:15px;
  position:relative;
  z-index:100;
  background:#111;
}
button {
  width:100%;
  padding:12px;
  margin:6px 0;
  font-size:14px;
  background:#00fff7;
  border:none;
  cursor:pointer;
}
select, button {
  width:100%;
  padding:10px;
  margin:6px 0;
}

#pitch {
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;   /* realistickÃ½ pomÄ›r fotbalovÃ©ho hÅ™iÅ¡tÄ› */
  max-height: 75vh;
  background: #1b5e20;
  border: 3px solid white;
  margin: auto;
  overflow: hidden;
}

/* ÄŒÃ¡ry */
.center-line {
  position: absolute;
  width: 100%;
  height: 0.3%;
  background: white;
  top: 50%;
}

.center-circle {
  position: absolute;
  width: 20%;
  aspect-ratio: 1;
  border: 2px solid white;
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* HrÃ¡Äi â€“ velikost se pÅ™izpÅ¯sobuje */
.player {
  position: absolute;
  width: 6%;
  aspect-ratio: 1;
  border-radius: 50%;
  background: #00fff7;
  color: black;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(8px, 1vw, 12px);
  cursor: grab;
  z-index: 10;
}

#bench {
  background:#222;
  padding:10px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.bench-player {
  width:60px;
  height:60px;
  border-radius:50%;
  background:#ff9800;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
  cursor:pointer;
}

/* MODAL */
#editModal {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  display:none;
  align-items:center;
  justify-content:center;
}

#modalContent {
  background:#222;
  padding:20px;
  width:300px;
}
</style>
</head>

<body>

<header>âš½ MATCH LINEUP PRO</header>

<div class="controls">
  <select id="formationSelect">
    <option value="1-4-4-2">1-4-4-2</option>
    <option value="1-4-2-3-1">1-4-2-3-1</option>
    <option value="1-4-3-3">1-4-3-3</option>
  </select>

  <button id="createBtn">VytvoÅ™it rozestavenÃ­</button>
  <button id="exportBtn">ğŸ“¤ Export PNG</button>
  <button id="exportPdfBtn">ğŸ“„ Export PDF</button>
  <button id="saveBtn">ğŸ’¾ UloÅ¾it sestavu</button>
</div>


<div id="pitch">
  <div class="center-line"></div>
  <div class="center-circle"></div>
</div>

<h3 style="padding:10px">ğŸª‘ LaviÄka nÃ¡hradnÃ­kÅ¯</h3>
<div id="bench"></div>

<!-- MODAL -->
<div id="editModal">
  <div id="modalContent">
    <h3>Upravit hrÃ¡Äe</h3>
    <input id="playerNameInput" placeholder="JmÃ©no hrÃ¡Äe">
    <button id="confirmNameBtn">OK</button>
  </div>
</div>

<script>
const pitch = document.getElementById("pitch");
const createBtn = document.getElementById("createBtn");
const formationSelect = document.getElementById("formationSelect");
const bench = document.getElementById("bench");
const editModal = document.getElementById("editModal");
const playerNameInput = document.getElementById("playerNameInput");
const confirmNameBtn = document.getElementById("confirmNameBtn");

let selectedPlayer = null;

/* VYTVOÅ˜ ROZESTAVENÃ */
createBtn.onclick = () => {
  pitch.querySelectorAll(".player").forEach(p => p.remove());
  bench.innerHTML = "";

  const rows = formationSelect.value.split("-").map(Number);
  const h = pitch.clientHeight;
  const w = pitch.clientWidth;

  rows.forEach((count, rowIndex) => {
    for (let i = 0; i < count; i++) {

      const player = createPlayer(rowIndex === 0 && count === 1 ? "GK" : "HrÃ¡Ä");

      const yPercent = 100 - ((rowIndex + 1) * (100 / (rows.length + 1)));
const xPercent = ((i + 1) * (100 / (count + 1)));

player.style.left = xPercent + "%";
player.style.top = yPercent + "%";
player.style.transform = "translate(-50%, -50%)";


      pitch.appendChild(player);
    }
  });

  // vytvoÅ™ 5 nÃ¡hradnÃ­kÅ¯
  for (let i = 1; i <= 5; i++) {
    const benchPlayer = document.createElement("div");
    benchPlayer.className = "bench-player";
    benchPlayer.textContent = "N" + i;

    benchPlayer.onclick = () => {
      const newPlayer = createPlayer("N" + i);
      newPlayer.style.left = "50%";
      newPlayer.style.top = "50%";
      pitch.appendChild(newPlayer);
    };

    bench.appendChild(benchPlayer);
  }
};

/* VYTVOÅ˜ HRÃÄŒE */
function createPlayer(name) {
  const player = document.createElement("div");
  player.className = "player";
  player.textContent = name;

  makeDraggable(player);

  player.onclick = () => {
    selectedPlayer = player;
    playerNameInput.value = player.textContent;
    editModal.style.display = "flex";
  };

  return player;
}

/* DRAG */
function makeDraggable(el) {
  el.addEventListener("pointerdown", e => {
    el.setPointerCapture(e.pointerId);
  });

  el.addEventListener("pointermove", e => {
    if (e.buttons !== 1) return;

    const rect = pitch.getBoundingClientRect();

    const x = ((e.clientX - rect.left) / rect.width) * 100;
    const y = ((e.clientY - rect.top) / rect.height) * 100;

    el.style.left = x + "%";
    el.style.top = y + "%";
    el.style.transform = "translate(-50%, -50%)";
  });
}


/* POTVRZENÃ JMÃ‰NA */
confirmNameBtn.onclick = () => {
  if (selectedPlayer) {
    selectedPlayer.textContent = playerNameInput.value;
  }
  editModal.style.display = "none";
};
</script>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html>
