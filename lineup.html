<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Match Lineup PRO</title>

<style>
body {
  margin:0;
  font-family:Arial, sans-serif;
  background:#111;
  color:white;
}

header {
  text-align:center;
  padding:15px;
  font-size:22px;
}

.controls {
  padding:15px;
}

select, button {
  width:100%;
  padding:10px;
  margin:6px 0;
}

#pitch {
  position:relative;
  width:100%;
  height:60vh;
  background:#1b5e20;
  border:3px solid white;
  overflow:hidden;
}

.center-line {
  position:absolute;
  width:100%;
  height:2px;
  background:white;
  top:50%;
}

.center-circle {
  position:absolute;
  width:140px;
  height:140px;
  border:2px solid white;
  border-radius:50%;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
}

.player {
  position:absolute;
  width:60px;
  height:60px;
  border-radius:50%;
  background:#00fff7;
  color:black;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
  text-align:center;
  cursor:grab;
  z-index:10;
}

#bench {
  background:#222;
  padding:10px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.bench-player {
  width:60px;
  height:60px;
  border-radius:50%;
  background:#ff9800;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
  cursor:pointer;
}

/* MODAL */
#editModal {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  display:none;
  align-items:center;
  justify-content:center;
}

#modalContent {
  background:#222;
  padding:20px;
  width:300px;
}
</style>
</head>

<body>

<header>‚öΩ MATCH LINEUP PRO</header>

<div class="controls">
  <select id="formationSelect">
    <option value="1-4-4-2">1-4-4-2</option>
    <option value="1-4-2-3-1">1-4-2-3-1</option>
    <option value="1-4-3-3">1-4-3-3</option>
  </select>

  <button id="createBtn">Vytvo≈ôit rozestaven√≠</button>
</div>

<div id="pitch">
  <div class="center-line"></div>
  <div class="center-circle"></div>
</div>

<h3 style="padding:10px">ü™ë Laviƒçka n√°hradn√≠k≈Ø</h3>
<div id="bench"></div>

<!-- MODAL -->
<div id="editModal">
  <div id="modalContent">
    <h3>Upravit hr√°ƒçe</h3>
    <input id="playerNameInput" placeholder="Jm√©no hr√°ƒçe">
    <button id="confirmNameBtn">OK</button>
  </div>
</div>

<script>
const pitch = document.getElementById("pitch");
const createBtn = document.getElementById("createBtn");
const formationSelect = document.getElementById("formationSelect");
const bench = document.getElementById("bench");
const editModal = document.getElementById("editModal");
const playerNameInput = document.getElementById("playerNameInput");
const confirmNameBtn = document.getElementById("confirmNameBtn");

let selectedPlayer = null;

/* VYTVO≈ò ROZESTAVEN√ç */
createBtn.onclick = () => {
  pitch.querySelectorAll(".player").forEach(p => p.remove());
  bench.innerHTML = "";

  const rows = formationSelect.value.split("-").map(Number);
  const h = pitch.clientHeight;
  const w = pitch.clientWidth;

  rows.forEach((count, rowIndex) => {
    for (let i = 0; i < count; i++) {

      const player = createPlayer(rowIndex === 0 && count === 1 ? "GK" : "Hr√°ƒç");

      const y = h - (rowIndex + 1) * (h / (rows.length + 1));
      const x = (i + 1) * (w / (count + 1));

      player.style.left = x + "px";
      player.style.top = y + "px";

      pitch.appendChild(player);
    }
  });

  // vytvo≈ô 5 n√°hradn√≠k≈Ø
  for (let i = 1; i <= 5; i++) {
    const benchPlayer = document.createElement("div");
    benchPlayer.className = "bench-player";
    benchPlayer.textContent = "N" + i;

    benchPlayer.onclick = () => {
      const newPlayer = createPlayer("N" + i);
      newPlayer.style.left = "50%";
      newPlayer.style.top = "50%";
      pitch.appendChild(newPlayer);
    };

    bench.appendChild(benchPlayer);
  }
};

/* VYTVO≈ò HR√ÅƒåE */
function createPlayer(name) {
  const player = document.createElement("div");
  player.className = "player";
  player.textContent = name;

  makeDraggable(player);

  player.onclick = () => {
    selectedPlayer = player;
    playerNameInput.value = player.textContent;
    editModal.style.display = "flex";
  };

  return player;
}

/* DRAG */
function makeDraggable(el) {
  let offsetX, offsetY;

  el.addEventListener("pointerdown", e => {
    offsetX = e.offsetX;
    offsetY = e.offsetY;
    el.setPointerCapture(e.pointerId);
  });

  el.addEventListener("pointermove", e => {
    if (e.buttons !== 1) return;
    el.style.left = (e.pageX - pitch.offsetLeft - offsetX) + "px";
    el.style.top = (e.pageY - pitch.offsetTop - offsetY) + "px";
  });
}

/* POTVRZEN√ç JM√âNA */
confirmNameBtn.onclick = () => {
  if (selectedPlayer) {
    selectedPlayer.textContent = playerNameInput.value;
  }
  editModal.style.display = "none";
};
</script>

</body>
</html>
